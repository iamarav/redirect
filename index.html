<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect</title>

    <meta name="description" content="Redirection page.">

    <style>
        * {
            font-family: system-ui, sans-serif;
        }

        body {
            margin: 10px 20px;
        }

        body.has-error h1 {
            color: red;
        }

        ul#all-links {
            display: flex;
            gap: 0.5rem;
            padding: 0;
            list-style: none;
        }
    </style>
</head>

<body>
    <noscript>This page requires JavaScript to run. Please enable and try refreshing this page.</noscript>

    <h1 id="heading">Redirecting...</h1>
    <p id="message"></a> </p>
    <ul id="all-links"></ul>

    <script>
        const heading = document.getElementById("heading");
        const message = document.getElementById("message");
        const allLinks = document.getElementById("all-links");

        const links = {
            // Website
            "blog": "https://gauravsachdeva.in",
            "portfolio": "https://gauravsachdeva.in",
            "static": "http://static.gauravsachdeva.in",

            // Social Links
            "github": "https://github.com/iamarav",
            "githubio": "https://iamarav.github.io",
            "codepen": "https://codepen.io/gauravsachdeva",
            "twitter": "https://x.com/Sachdeva_Sahab",
            "instagram": "https://www.instagram.com/sachdeva_sahab",
            "linkedin": "https://www.linkedin.com/in/iamarav",
            "tumblr": "https://sachdeva-sahab.tumblr.com",
            "pinterest": "https://pinterest.com/sachdevasahab",
        };

        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        function redirect() {
            let page = getQueryParam('page');
            const path = getQueryParam('path') || ''

            if (page == null) {
                page = "blog";
            }

            if (links[page]) {
                const url = `${links[page]}${path}/?ref=redirect`

                message.innerHTML = `If you are not redirected automatically, please <a href="${url}">click here.</a>`
                window.location.href = url;
            } else {
                throw new Error(`The page "${page}" does not exist.`);
            }
        }

        try {
            redirect();
        } catch (error) {
            document.body.classList.add("has-error");
            heading.innerText = "Error";
            message.innerText = error.message;
            allLinks.innerHTML = Object
                .entries(links)
                .map(([key, link]) => `<li id="link-${key}"><a href="${link}">${key}</a></li>`)
                .join("");
        }
    </script>
</body>

</html>